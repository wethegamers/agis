apiVersion: "external-secrets.io/v1alpha1"
kind: ExternalSecret
metadata:
  name: agis-bot-secrets
  labels:
    app: agis-bot
    chart: "{{ .Chart.Name }}-{{ .Chart.Version | replace "+" "_" }}"
spec:
  target:
    name: agis-bot-secrets
  secretStoreRef:
    kind: ClusterSecretStore
    name: {{ .Values.clusterSecretStoreName }}
  refreshInterval: "10s"
  data:
    # Discord Configuration
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_TOKEN
      secretKey: DISCORD_TOKEN
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_CLIENT_ID
      secretKey: DISCORD_CLIENT_ID
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_GUILD_ID
      secretKey: DISCORD_GUILD_ID
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: VERIFIED_ROLE_ID
      secretKey: VERIFIED_ROLE_ID
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: VERIFY_API_SECRET
      secretKey: VERIFY_API_SECRET
    
    # Database Configuration
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DB_HOST
      secretKey: DB_HOST
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DB_USER
      secretKey: DB_USER
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DB_PASSWORD
      secretKey: DB_PASSWORD
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DB_NAME
      secretKey: DB_NAME
    
    # Agones Configuration
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AGONES_ALLOCATOR_ENDPOINT
      secretKey: AGONES_ALLOCATOR_ENDPOINT
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AGONES_ALLOCATOR_TLS
      secretKey: AGONES_ALLOCATOR_TLS
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AGONES_NAMESPACE
      secretKey: AGONES_NAMESPACE
    
    # Discord Logging Channel IDs
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_GENERAL
      secretKey: LOG_CHANNEL_GENERAL
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_USER
      secretKey: LOG_CHANNEL_USER
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_MOD
      secretKey: LOG_CHANNEL_MOD
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_ERROR
      secretKey: LOG_CHANNEL_ERROR
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_CLEANUP
      secretKey: LOG_CHANNEL_CLEANUP
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_CLUSTER
      secretKey: LOG_CHANNEL_CLUSTER
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_EXPORT
      secretKey: LOG_CHANNEL_EXPORT
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: LOG_CHANNEL_AUDIT
      secretKey: LOG_CHANNEL_AUDIT
    
    # ayeT-Studios Ad Network
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AYET_API_KEY
      secretKey: AYET_API_KEY
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AYET_CALLBACK_TOKEN
      secretKey: AYET_CALLBACK_TOKEN
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AYET_OFFERWALL_URL
      secretKey: AYET_OFFERWALL_URL
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AYET_SURVEYWALL_URL
      secretKey: AYET_SURVEYWALL_URL
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: AYET_VIDEO_PLACEMENT_ID
      secretKey: AYET_VIDEO_PLACEMENT_ID
    
    # Sentry Error Monitoring
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: SENTRY_DSN
      secretKey: SENTRY_DSN
    
    # Discord Webhooks for Sentry Alerts
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_PAYMENTS
      secretKey: DISCORD_WEBHOOK_PAYMENTS
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_ADS
      secretKey: DISCORD_WEBHOOK_ADS
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_INFRA
      secretKey: DISCORD_WEBHOOK_INFRA
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_SECURITY
      secretKey: DISCORD_WEBHOOK_SECURITY
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_PERFORMANCE
      secretKey: DISCORD_WEBHOOK_PERFORMANCE
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_REVENUE
      secretKey: DISCORD_WEBHOOK_REVENUE
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_CRITICAL
      secretKey: DISCORD_WEBHOOK_CRITICAL
    - remoteRef:
        key: {{ .Values.vaultSecretPath }}
        property: DISCORD_WEBHOOK_COMPLIANCE
      secretKey: DISCORD_WEBHOOK_COMPLIANCE
